{% extends "base.html" %}

{% block title %}Mis Archivos{% endblock %}

{% block content %}
<h2>Mis Archivos</h2>

<h3>Subir archivo</h3>
<form method="post" enctype="multipart/form-data" action="/subir_archivo">
    <input type="file" name="archivo" required><br><br>
    <button type="submit">Subir</button>
</form>

<hr>

<h3>Archivos subidos</h3>

{% if archivos %}
<table border="1">
    <tr>
        <th>Nombre</th>
        <th>Fecha</th>
        <th>Acciones</th>
    </tr>
    {% for archivo in archivos %}
    <tr>
        <td>{{ archivo.nombre_original }}</td>
        <td>{{ archivo.fecha_subida.strftime('%d/%m/%Y') }}</td>
        <td>
            <a href="/archivo/{{ archivo.id }}">Descargar</a>
            <form method="post" action="/archivo/{{ archivo.id }}/eliminar">
                <button type="submit">Eliminar</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No hay archivos.</p>
{% endif %}

<p><a href="/dashboard">Volver</a></p>
{% endblock %}